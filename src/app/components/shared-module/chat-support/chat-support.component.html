<div *ngIf="isAuthnticated(); else isNotLoggedIn">
  <div *ngIf="!isAdmin() && !isChatInUrl()">
    <div class="support mob_unvis" [ngClass]="{'open-support': isOpenChatWithAdmin}">
      <div class="support-header" (click)="openOnlineConsultantChat()">
        <div class="support-header-write">
          <svg xmlns="http://www.w3.org/2000/svg" width="19" height="15" viewBox="0 0 19 15"><path d="M18.5,55.318a1.629,1.629,0,0,0-1.2-.5H1.7a1.63,1.63,0,0,0-1.2.5,1.645,1.645,0,0,0-.5,1.2V68.113a1.644,1.644,0,0,0,.5,1.2,1.629,1.629,0,0,0,1.2.5H17.3a1.706,1.706,0,0,0,1.7-1.7V56.522A1.645,1.645,0,0,0,18.5,55.318Zm-.859,12.795a.345.345,0,0,1-.339.341H1.7a.325.325,0,0,1-.239-.1.328.328,0,0,1-.1-.24V59.931a6.22,6.22,0,0,0,.732.7q2.842,2.195,4.517,3.6.541.458.88.714a4.881,4.881,0,0,0,.917.517,2.646,2.646,0,0,0,1.087.261h.021a2.645,2.645,0,0,0,1.087-.261,4.875,4.875,0,0,0,.917-.517q.339-.256.88-.714,1.675-1.406,4.517-3.6a6.188,6.188,0,0,0,.731-.7v8.182Zm0-11.314v.117a2.669,2.669,0,0,1-.493,1.4,5,5,0,0,1-1.065,1.23q-2.047,1.62-4.252,3.377l-.371.314q-.307.261-.488.4t-.472.336a2.825,2.825,0,0,1-.535.293,1.254,1.254,0,0,1-.456.1H9.489a1.255,1.255,0,0,1-.456-.1,2.82,2.82,0,0,1-.535-.293q-.291-.2-.472-.336t-.488-.4l-.371-.314q-2.205-1.758-4.252-3.377a3.734,3.734,0,0,1-1.559-3.026.345.345,0,0,1,.339-.341H17.3a.183.183,0,0,0,.148.027c.042-.014.074.012.1.08s.041.1.058.1.028.041.032.133.005.139.005.139V56.8Z" transform="translate(0 -54.817)" fill="#fff"/></svg>
          Написать сообщение
        </div>
        <div class="support-header-content">
          <p class="name-admim">Администратор</p>
        </div>
        <div class="support-indicator">{{chatWithAdmin.countNewMessages}}</div>
        </div>
        <div class="support-chat support-chat-content">
          <div *ngIf="isOpenChatWithAdmin">
            <app-common-online-consultant-chat [chatWithAdmin]="chatWithAdmin"></app-common-online-consultant-chat>
          </div>
        </div>
        <div class="support-send">
          <textarea maxlength="2000" placeholder="Введите сообщение" class="textarea-support"
            (keydown.enter)="sendOnlineConsultantMessage()" [(ngModel)]="curMessage.message">
          </textarea>
          <button class="btn-send-support" (click)="sendOnlineConsultantMessage()">
            <svg xmlns="http://www.w3.org/2000/svg" width="8" height="12" viewBox="0 0 10 12"><path d="M51.288,4.522,46.948.191a.665.665,0,0,0-.934,0l-4.341,4.33a.656.656,0,0,0,0,.928l.394.393a.654.654,0,0,0,.465.191A.667.667,0,0,0,43,5.843l2.538-2.526v8.026a.649.649,0,0,0,.647.657h.557a.674.674,0,0,0,.675-.657V3.288l2.552,2.555a.653.653,0,0,0,.924,0l.393-.393A.656.656,0,0,0,51.288,4.522Z" transform="translate(-41.481)" fill="#fff"/></svg>
          </button>
      </div>
    </div>
  </div>
</div>
<ng-template #isNotLoggedIn>
  <div class="support mob_unvis" [ngClass]="{'open-support': isOpenChatWithAdmin}">
    <div class="support-header" (click)="openOnlineConsultantChat()">
      <div class="support-header-write">
        <svg xmlns="http://www.w3.org/2000/svg" width="19" height="15" viewBox="0 0 19 15"><path d="M18.5,55.318a1.629,1.629,0,0,0-1.2-.5H1.7a1.63,1.63,0,0,0-1.2.5,1.645,1.645,0,0,0-.5,1.2V68.113a1.644,1.644,0,0,0,.5,1.2,1.629,1.629,0,0,0,1.2.5H17.3a1.706,1.706,0,0,0,1.7-1.7V56.522A1.645,1.645,0,0,0,18.5,55.318Zm-.859,12.795a.345.345,0,0,1-.339.341H1.7a.325.325,0,0,1-.239-.1.328.328,0,0,1-.1-.24V59.931a6.22,6.22,0,0,0,.732.7q2.842,2.195,4.517,3.6.541.458.88.714a4.881,4.881,0,0,0,.917.517,2.646,2.646,0,0,0,1.087.261h.021a2.645,2.645,0,0,0,1.087-.261,4.875,4.875,0,0,0,.917-.517q.339-.256.88-.714,1.675-1.406,4.517-3.6a6.188,6.188,0,0,0,.731-.7v8.182Zm0-11.314v.117a2.669,2.669,0,0,1-.493,1.4,5,5,0,0,1-1.065,1.23q-2.047,1.62-4.252,3.377l-.371.314q-.307.261-.488.4t-.472.336a2.825,2.825,0,0,1-.535.293,1.254,1.254,0,0,1-.456.1H9.489a1.255,1.255,0,0,1-.456-.1,2.82,2.82,0,0,1-.535-.293q-.291-.2-.472-.336t-.488-.4l-.371-.314q-2.205-1.758-4.252-3.377a3.734,3.734,0,0,1-1.559-3.026.345.345,0,0,1,.339-.341H17.3a.183.183,0,0,0,.148.027c.042-.014.074.012.1.08s.041.1.058.1.028.041.032.133.005.139.005.139V56.8Z" transform="translate(0 -54.817)" fill="#fff"/></svg>
        Написать сообщение
      </div>
      <div class="support-header-content">
        <p class="name-admim">Техподдержка</p>
      </div>
    </div>
    <div class="support-chat tech-support" style="height: 310px; overflow-y: scroll;">
      <app-support [isOnlineConsultant]="true"></app-support>
    </div>
  </div>
</ng-template>
